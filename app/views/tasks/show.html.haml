.row
  .container-fluid
    .jumbotron
      %h1
        Task: #{@task.name}
      %h3
        Category: #{link_to @task.category.name, category_path(@task.category)}
      %p
        %b
          %i= @task.complete ? "Complete" : "Incomplete"
      %p
        %strong Duedate:
        = @task.duedate.strftime("%A, %B %e at %l:%M %p")
        , or
        %strong
          - if @task.duedate > Time.now
            in
          = time_ago_in_words(@task.duedate)
          - if @task.duedate < Time.now
            ago
      %p
        %strong Time spent so far:
        = time_ago_in_words @task.seconds_spent.ago

      / "Complete task" button sends PATCH
      = form_for @task, url: complete_task_path(@task),
        method: :patch, html: { style: "display:inline;"} do |f|

        / every time I break the next line into two lines it crashes the HAML machine...
        = f.submit @task.complete ? 'Un-Complete' : 'Complete', class: 'btn btn-info btn-lg'

      = link_to 'Edit', edit_task_path(@task), class: 'btn btn-default btn-lg'

.row
  .col-md-4
    %button#toggle-subtasks.btn.btn-default.btn-sm
      %b Show/Hide Subtasks
  .col-md-1
  .col-md-7
    %button#toggle-intervals.btn.btn-default.btn-sm
      %b Show/Hide Intervals

.row
  / these are not in partials because I want to be able to
  / update the styles of both easily

  / ### SUBTASKS AREA ###
  .col-md-4
    #subtasks.panel.panel-default
      .panel-heading
        %h3 Subtasks
      .panel-body
        .well.well-sm
          = render 'subtasks/form'
        %ul.list-group
          - @task.subtasks.each do |subtask|
            %li.list-group-item
              = subtask.name

              %span.badge
                = link_to 'Delete',
                  subtask_path(subtask),
                  method: :delete,
                  confirm: 'Are you sure?',
                  style: 'color:white;font-weight:normal;'


  .col-md-1

  / ### INTERVALS AREA ###
  .col-md-7
    #intervals.panel.panel-default
      .panel-heading
        %h3 Intervals
      .panel-body
        .well.well-sm
          .row
            .col-md-2
              %button#record.btn.btn-success.btn-sm Record
              %button#cancel.btn.btn-warning.btn-sm Cancel
            = render 'intervals/form'
        %table.table#interval-table
          %tr
            %th Start
            %th End
            %th Time
            %th Date
            %th
          = render @task.intervals
